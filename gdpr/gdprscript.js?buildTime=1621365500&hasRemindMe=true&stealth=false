// Script created for GDPR Compliance. Source code located: weebly/kings-banner

window.w_gdpr = {"whitelist":["atatus-aid","atatus-sid","promo","sto-id-springboard-home","superhome_session","XSRF-TOKEN","websitespring-xsrf","websitespring_session","PublishedSiteSession","publishedsite-xsrf","editor_session","remember_web_","sto-id-trumpet","encore_session","sto-id-springboard-insights","WeeblySession","wuid","chamber-xsrf","pub_ses_id","com_cart_token","nsr","chamber_ses_id","M","_js_csrf","_csrf","_savt","_sqdi","_sqweb_session","preselect_first_funnel_experience","language","gdpr-kb-p","gdpr-kb","WeeblySiteLogin","_redirectLocation","unified_checkout","referral_token","site_session","WeeblyDiceRollUser","oauth_signup","force-automated-segment","square-sync-csrf","squaresync_session","square_sync_session","OrderId","cookie-consent"],"regex_whitelist":["\/wct-.+\/"],"strings":{"body":"This site uses cookies to personalize your experience, analyze site usage, and offer tailored promotions.","privacyLink":"https:\/\/www.degradablesolutions.com","privacyText":"Cookie Policy","buttonText":"I accept","remindText":"Remind me later"},"stealth_mode":false,"has_remind_me":true,"is_user_site":true,"allow_non_weebly_domain":false,"is_eu_onetrust":false,"language":""};

(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var html='<div class="kb-container" id="kb-container">\n    <div class="kb-content">\n        <div class="kb-description">This site uses cookies to assist with navigation, analyze your use of our site(s), and assist with promotional and marketing efforts. <a style="color: #2990ea" href="/privacy" target="_blank">Cookie Policy</a></div>\n        <a href="#" class="kb-remind-link" id="kb-link">Remind Me Later</a>\n        <a href="#" class="kb-notice-btn" id="kb-btn">Accept Cookies</a>\n    </div>\n</div>\n\n<style>\n    .kb-container {\n        background: #363b3e;\n        font-size: 0.8em;\n        text-align: center;\n        line-height: 1.3;\n        position: fixed;\n        z-index: 9999999999; /* make sure z-index is higher than all chat apps  */\n        bottom: 0;\n        width: 100vw;\n        border-top: #fff 3px solid;\n        font-family: "Graphik","effra","Proxima Nova","Helvetica Neue","Helvetica","Arial",sans-serif;\n    }\n    .kb-content {\n        color: #fff;\n        padding: 10px 0px;\n        width: 100%;\n        max-width: 1440px;\n        margin: auto;\n    }\n\n    @media screen and (min-width: 64.0625em) {\n        .kb-content {\n            padding: 5px 20px;\n        }\n    }\n    .kb-description {\n        text-align: left;\n        line-height: 1.3;\n        width: 70%;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    @media screen and (min-width: 40.0625em) {\n        .kb-description {\n            margin-right: 2em;\n        }\n        .kb-remind-link {\n            margin-left: -2em;\n        }\n    }\n\n    a.kb-notice-btn {\n        color: #fff;\n        background: #0073ff;\n        display: inline-block;\n        padding: 10px 0;\n        border-radius: 3px;\n        font-weight: 500;\n        min-width: 150px;\n        text-decoration: none;\n    }\n\n    a.kb-notice-btn:hover {\n        background-color: #fff;\n        color: #0073ff;\n    }\n\n    .kb-remind-link {\n        color: #2990ea;\n        text-decoration: none;\n        margin-right: 1em;\n    }\n\n    @media screen and (max-width: 40em) {\n        .kb-notice-btn {\n            width: 25%;\n            min-width: unset;\n        }\n    }\n}\n</style>\n',KingsBanner=function(){function n(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n),this.allowed=t.whitelist,this.regex_allowed=t.regex_whitelist,this.strings=t.strings,this.is_stealth_mode=t.stealth_mode,this.is_user_site=t.is_user_site,this.has_remind_me=t.has_remind_me,this.allow_non_weebly_domain=t.allow_non_weebly_domain,this.language=t.language,this.bannerAcceptedCalled=!1,this.bannerDismissedCalled=!1,this.getCookie("gdpr-kb-p")&&this.is_user_site||(this.deleteBLCookies(),this.overrideCookies(),this.is_user_site||(this.deleteBlockedStorageData(localStorage),this.deleteBlockedStorageData(sessionStorage),this.overrideStorage()),"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",function(){e.createBanner()},{once:!0}):this.createBanner())}return _createClass(n,[{key:"checkAllowed",value:function(e){var t=e.split(";")[0].split("=")[0];return this.checkAllowedByName(t)}},{key:"checkAllowedByName",value:function(e){if(0<=this.allowed.indexOf(e))return!0;for(var t=0;t<this.regex_allowed.length;t+=1){var n=this.regex_allowed[t].split("/"),i=new RegExp(n[1],n[2]?n[2]:"g");if(e.match(i))return!0}return!1}},{key:"getCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i+=1){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"deleteBLCookies",value:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t+=1){for(var n=e[t],i=n.indexOf("="),o=-1<i?n.substr(0,i):n;" "===o.charAt(0);)o=o.substring(1,o.length);if(!this.checkAllowed(o)){var s=window.location.hostname,r=this.getRootDomain(s);document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;",document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;",document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=."+s+";",document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=."+r+";"}}}},{key:"overrideCookies",value:function(){var t=this,n=Object.getOwnPropertyDescriptor(Document.prototype,"cookie")||Object.getOwnPropertyDescriptor(HTMLDocument.prototype,"cookie");Object.defineProperty(document,"cookie",{get:function(){return n.get.call(document)},set:function(e){return t.checkAllowed(e)?n.set.call(document,e):null}})}},{key:"overrideStorage",value:function(){var n=this;Storage.prototype.setItemOverride=Storage.prototype.setItem,Storage.prototype.setItem=function(e,t){n.checkAllowedByName(e)&&this.setItemOverride(e,t)}}},{key:"deleteBlockedStorageData",value:function(e){for(var t=Object.entries(e),n=0;n<t.length;n+=1){var i=t[n][0];this.checkAllowedByName(i)||e.removeItem(i)}}},{key:"listenToMessages",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:null;window.addEventListener("message",function(e){if(e.data.kingsBanner&&e.data.kingsBanner.event)switch(e.data.kingsBanner.event){case"opt-in":t.bannerAccepted(n,!1);break;case"dismiss":t.bannerDismissed(n)}},!1)}},{key:"sendPostMessage",value:function(e){window.parent!==window.self&&window.parent.postMessage({kingsBanner:{event:e}},"*");for(var t=0;t<window.frames.length;t+=1){window.frames[t].postMessage({kingsBanner:{event:e}},"*")}}},{key:"bannerDismissed",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this.bannerDismissedCalled||(this.bannerDismissedCalled=!0,localStorage.gdpr_hide_until=Date.now()+36e5,t&&(t.parentNode.removeChild(t),document.getElementsByTagName("body")[0].style.cssText="padding-bottom: unset;"),this.sendPostMessage("dismiss"))}},{key:"bannerAccepted",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:null,i=1<arguments.length&&void 0!==t&&t;this.bannerAcceptedCalled||(this.bannerAcceptedCalled=!0,this.is_user_site?this.setCookie("gdpr-kb-p","true",9999):this.setCookie("gdpr-kb","true",9999),n&&(n.parentNode.removeChild(n),document.getElementsByTagName("body")[0].style.cssText="padding-bottom: unset;"),i&&this.initializeAragorn(),this.sendPostMessage("opt-in"),this.allow_non_weebly_domain&&window.location.reload())}},{key:"initializeAragorn",value:function(){window.AragornAnalytics&&(window.AragornAnalytics.initialize(),window.AragornAnalytics.track({type:"standard",location:"unknown",object_category:"banner_notification",action:"click",object_instance:"gdpr_banner",property:"gdpr_consent",value:"opted-in"}))}},{key:"createBanner",value:function(){if(this.is_stealth_mode)this.listenToMessages();else{if(this.has_remind_me){var e=parseInt(localStorage.gdpr_hide_until,10);if(!Number.isNaN(e)&&Date.now()<e)return void this.listenToMessages()}this.is_user_site?this.listenToMessages(this.createBannerForUserSite()):this.listenToMessages(this.createBannerForOneTrust())}}},{key:"createBannerForUserSite",value:function(){var e=this,t=document.createElement("div");t.innerHTML=html,document.body.appendChild(t);var n=document.querySelector(".kb-description");if(this.strings.body&&this.strings.privacyText){n.innerText=this.strings.body+" ";var i=document.createElement("a");i.setAttribute("style","color: #2990ea; text-decoration: none;"),i.setAttribute("href",this.strings.privacyLink),i.setAttribute("target","_blank"),i.innerText=this.strings.privacyText,n.appendChild(i)}var o=document.getElementById("kb-btn");this.strings.buttonText&&(o.innerHTML=this.strings.buttonText);var s=document.getElementById("kb-link");return this.strings.remindText&&(s.innerHTML=this.strings.remindText),this.has_remind_me?s.onclick=function(){return e.bannerDismissed(t)}:s.style.display="none",document.getElementsByTagName("body")[0].style.cssText="padding-bottom: 2.8em;",document.getElementById("kb-btn").onclick=function(){return e.bannerAccepted(t,!0)},t}},{key:"createBannerForOneTrust",value:function(){var t=this;this.language&&0<this.language.length&&document.getElementsByTagName("html")[0].setAttribute("lang",this.language);window.OptanonWrapper=function(){if(window.SqOneTrust=new SqOneTrust,0<Object.keys(window.SqOneTrust.groupConsentHash).length){var e={allowStrictlyNecessaryCookies:!window.SqOneTrust.strictlyNecessaryCookiesBlocked,allowFunctionalityCookies:!window.SqOneTrust.functionalityCookiesBlocked,allowPerformanceCookies:!window.SqOneTrust.performanceAndAnalyticsCookiesBlocked,allowTargetingCookies:!window.SqOneTrust.retargetingOrAdvertisingCookiesBlocked};t.setCookieConsentForOneTrust(JSON.stringify(e)),document.cookie="gdpr-kb=;expires=Thu, 01 Jan 1970 00:00:00 GMT",t.initializeAragorn()}};var e=document.createElement("script");return e.type="text/javascript",e.charset="UTF-8",e.setAttribute("data-domain-script",this.getOneTrustDataDomainScript()),e.setAttribute("data-document-language","true"),e.src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",document.head.prepend(e),e}},{key:"getOneTrustDataDomainScript",value:function(){switch(this.getRootDomain(window.location.hostname)){case"weebly.com":return"8841470e-8a69-4bca-9d0f-429385a04d0d";case"square.online":return"ebf6860a-7fdb-4079-852f-b9de13f1a824";case"weebly.net":return"14219c5c-21b7-4dea-b2b4-7f517511ecad-test";case"weeblycloud.com":return"0d352778-7294-4c5f-a3ee-f14cbca2a91d";case"weeblycloud.net":return"d752b31a-331b-450f-9fe6-980ac586295f-test";default:return"8841470e-8a69-4bca-9d0f-429385a04d0d-test"}}},{key:"getRootDomain",value:function(e){return e.split(".").slice(-2).join(".")}},{key:"setCookie",value:function(e,t,n){var i="",o="",s=window.location.host,r=s.substr(s.length-3);if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),i="; expires="+a.toUTCString()}this.is_user_site||-1===s.indexOf("weebly.")||".com"!==r&&".net"!==r||(o="domain=weebly."+r),this.is_user_site&&this.allow_non_weebly_domain&&(o="domain="+s),document.cookie=e+"="+(t||"")+i+"; path=/;"+o}},{key:"setCookieConsentForOneTrust",value:function(e){var t="cookie-consent",n=this.getRootDomain(window.location.hostname),i=new Date;i.setTime(i.getTime()+31536e6),document.cookie=t+"="+e+"; expires="+i.toUTCString()+"; path=/; domain=."+n;var o=document.cookie.match(/(^|;)\s*cookie-consent=/gi);o&&1<o.length&&(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;",document.cookie=t+"="+e+"; expires="+i.toUTCString()+"; path=/; domain=."+n)}}]),n}();window.kingsBanner=new KingsBanner(window.w_gdpr);_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CONSENT_COOKIE_KEY="OptanonConsent",COOKIE_GROUP_KEYS={strictlyNecessary:"C0001",performanceAndAnalytics:"C0002",functionality:"C0003",retargetingOrAdvertising:"C0004"},CONSENT_GROUP_COOKIE_SUBSTRING="groups=",PREFERENCES_CHANGED_EVENT_KEY="oneTrustPreferencesChangedEvent",SqOneTrust=function(){function e(){_classCallCheck(this,e),this.oneTrustPreferencesSet=!1,this.strictlyNecessaryCookiesBlocked=!1,this.performanceAndAnalyticsCookiesBlocked=!1,this.functionalityCookiesBlocked=!1,this.retargetingOrAdvertisingCookiesBlocked=!1,this.allCookiesAllowed=!1,this.cookieString=this._getCookieValue(CONSENT_COOKIE_KEY),this.groupConsentHash={},this._init()}return _createClass(e,[{key:"_init",value:function(){this._onUpdatedCookiePreferences()}},{key:"_dispatchUpdateEvent",value:function(){var e=new CustomEvent(PREFERENCES_CHANGED_EVENT_KEY,this.groupConsentHash);document.dispatchEvent(e)}},{key:"_onUpdatedCookiePreferences",value:function(){this._oneTrustGroupChoicesSet()&&(this._buildHashOfGroupConsentChoices(),this._setConsentChoices(),this._dispatchUpdateEvent())}},{key:"_setConsentChoices",value:function(){this.oneTrustPreferencesSet=!0,Object.values(this.groupConsentHash).includes("0")?this.allCookiesAllowed=!1:Object.values(this.groupConsentHash).every(function(e){return"1"===e})&&(this.allCookiesAllowed=!0),"1"!==this.groupConsentHash[COOKIE_GROUP_KEYS.strictlyNecessary]&&(this.strictlyNecessaryCookiesBlocked=!0),"1"!==this.groupConsentHash[COOKIE_GROUP_KEYS.performanceAndAnalytics]&&(this.performanceAndAnalyticsCookiesBlocked=!0),"1"!==this.groupConsentHash[COOKIE_GROUP_KEYS.functionality]&&(this.functionalityCookiesBlocked=!0),"1"!==this.groupConsentHash[COOKIE_GROUP_KEYS.retargetingOrAdvertising]&&(this.retargetingOrAdvertisingCookiesBlocked=!0)}},{key:"_buildHashOfGroupConsentChoices",value:function(){var e=this.cookieString.split("&").find(function(e){return e.includes(CONSENT_GROUP_COOKIE_SUBSTRING)}).split("=")[1].split(",");return this.groupConsentHash=e.reduce(function(e,t){var n=t.split(":");return e[n[0]]=n[1],e},this.groupConsentHash)}},{key:"_getCookieValue",value:function(){if("undefined"!=typeof document){var e=document.cookie?document.cookie.split("; "):[],t=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value.split("="),a=r.slice(1).join("=");'"'===a[0]&&(a=a.slice(1,-1));try{if(r[0]===CONSENT_COOKIE_KEY)return decodeURIComponent(a)}catch(e){console.log(e)}}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}return""}}},{key:"_oneTrustGroupChoicesSet",value:function(){return this.cookieString.includes(CONSENT_GROUP_COOKIE_SUBSTRING)}}]),e}();
},{}]},{},[1]);

